steps:
  - script: sudo apt install llvm
    displayName: "Install LLVM (Linux)"
    condition: eq(variables['Agent.OS'], 'Linux')
  - script: brew install llvm
    displayName: "Install LLVM (Mac)"
    condition: eq(variables['Agent.OS'], 'Darwin')
  - powershell: |
      Invoke-Expression (New-Object System.Net.WebClient).DownloadString('https://get.scoop.sh')
      scoop install llvm --global   
      Write-Output ($env:PATH)
      Write-Output ("##vso[task.setvariable variable=PATH]" + $env:PATH)
      Write-Output ("##vso[task.setvariable variable=LIBCLANG_PATH]C:\ProgramData\scoop\apps\llvm\current\lib")
    displayName: "Install LLVM (Windows)"
    condition: eq(variables['Agent.OS'], 'Windows_NT')
